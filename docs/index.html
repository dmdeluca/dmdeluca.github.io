<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>David DeLuca</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <h1 class="boxed">David DeLuca</h1>

  <p>
    I am David DeLuca, a writer, philosopher, musician, and person with hobbies and interests. On this site the user can find my writing, art, music, and other artifacts of my existence.
  </p>

  <h2>Content and Links</h2>
  <h3>Social Media</h3>
  <div>
    <ul>
      <li><a href="https://www.instagram.com/_daviddeluca/" target="_blank">Instagram</a> (pictures of my home-cooked meals, external link)</li>
    </ul>
  </div>
  <h3>Music</h3>
  <div>
    <ul>
      <li><a href="https://soundcloud.com/davidmdeluca" target="_blank">SoundCloud</a> (external link)</li>
      <li><a href="https://soundcloud.com/more-david-deluca" target="_blank">Additional SoundCloud</a> (external link)</li>
    </ul>
  </div>
  <h3>Writings and Philosophy</h3>
  <div>
    <ul id="blog-list"></ul>
    <script>
      (async () => {
        const response = await fetch('https://api.github.com/repos/dmdeluca/dmdeluca.github.io/contents/docs/writings');
        const data = await response.json();
        let htmlString = '';

        const writings = [];

        for (let file of data) {

          const dateResponse = (await fetch(`https://api.github.com/repos/dmdeluca/dmdeluca.github.io/commits?path=${file.path}&page=1&per_page=1`));
          const date = (await dateResponse.json())[0].commit.author.date;

          const lower = file.name.toLowerCase().slice(1);
          const upper = file.name.toUpperCase().charAt(0);
          const title = (upper + lower).replace(".html", "").replace("_", " ");

          writings.push({
            "date": new Date(date),
            "path": file.path.replace("docs/",""),
            "name": title
          });
        }

        for (let writing of writings.sort((a, b) => b.date - a.date)) {
          htmlString += `<li><a href="${writing.path}">${writing.name}</a> (updated ${writing.date.toLocaleDateString()})</li>`
        }

        document.getElementById('blog-list').innerHTML = htmlString;
      })()
    </script>
  </div>
</body>

</html>
